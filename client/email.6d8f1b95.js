import{S as a,i as e,s,q as t,r as l,v as r,x as o,y as n,z as i,E as c,e as d,V as m,f as u,F as f,c as $,b as p,u as h,j as g,k as b,A as y,a1 as v,H as E,O as x,M as k,ac as w,aa as j,U as T,t as I,d as U,G as z,ab as M}from"./client.6b6df5c9.js";import{l as O}from"./lodash.e8465d0e.js";import{I as q}from"./Input.9f93fc83.js";function B(a){let e,s;return e=new T({props:{type:"error",title:"Error",messages:[a[2]],rootClass:"absolute top-0"}}),{c(){t(e.$$.fragment)},l(a){l(e.$$.fragment,a)},m(a,t){r(e,a,t),s=!0},p(a,s){const t={};4&s&&(t.messages=[a[2]]),e.$set(t)},i(a){s||(o(e.$$.fragment,a),s=!0)},o(a){n(e.$$.fragment,a),s=!1},d(a){i(e,a)}}}function F(a){let e,s,t,l;return{c(){e=d("button"),s=d("i"),t=I("forward"),this.h()},l(a){e=$(a,"BUTTON",{slot:!0,class:!0,disabled:!0});var l=p(e);s=$(l,"I",{class:!0});var r=p(s);t=U(r,"forward"),r.forEach(u),l.forEach(u),this.h()},h(){h(s,"class","material-icons-outlined"),h(e,"slot","button"),h(e,"class","w-full h-full flex justify-center items-center svelte-16hbay0"),e.disabled=l=!a[1]},m(a,l){g(a,e,l),b(e,s),b(s,t)},p(a,s){2&s&&l!==(l=!a[1])&&(e.disabled=l)},d(a){a&&u(e)}}}function N(a){let e,s,x,k,w,j,T,I,U=a[2]&&B(a);return w=new q({props:{id:"email",type:"email",placeholder:"type your email address",value:a[0].email,autofocus:!0,required:!0,label:"Your email address",size:"xl",hasRightButton:!0,$$slots:{button:[F]},$$scope:{ctx:a}}}),w.$on("input",a[4]),{c(){e=c(),U&&U.c(),s=c(),x=d("div"),k=d("form"),t(w.$$.fragment),this.h()},l(a){m('[data-svelte="svelte-1om3z61"]',document.head).forEach(u),e=f(a),U&&U.l(a),s=f(a),x=$(a,"DIV",{class:!0});var t=p(x);k=$(t,"FORM",{});var r=p(k);l(w.$$.fragment,r),r.forEach(u),t.forEach(u),this.h()},h(){document.title="Sign Up - UMedmarket",h(x,"class","signup-content")},m(t,l){g(t,e,l),U&&U.m(t,l),g(t,s,l),g(t,x,l),b(x,k),r(w,k,null),j=!0,T||(I=y(k,"submit",v(a[5])),T=!0)},p(a,[e]){a[2]?U?(U.p(a,e),4&e&&o(U,1)):(U=B(a),U.c(),o(U,1),U.m(s.parentNode,s)):U&&(z(),n(U,1,1,(()=>{U=null})),E());const t={};1&e&&(t.value=a[0].email),258&e&&(t.$$scope={dirty:e,ctx:a}),w.$set(t)},i(a){j||(o(U),o(w.$$.fragment,a),j=!0)},o(a){n(U),n(w.$$.fragment,a),j=!1},d(a){a&&u(e),U&&U.d(a),a&&u(s),a&&u(x),i(w),T=!1,I()}}}function R(a,e,s){let t,l;x(a,j,(a=>s(0,t=a)));const r=k(w,{variables:{email:t.email}});x(a,r,(a=>s(6,l=a)));const o=O.debounce((a=>{j.update((e=>({...e,email:a})))}),300);let n,i;return a.$$.update=()=>{65&a.$$.dirty&&r.refetch({email:t.email}).then((a=>(s(1,n=!l.data.emailTaken),a))),64&a.$$.dirty&&s(1,n=!l.loading&&!l.data.emailTaken),64&a.$$.dirty&&s(2,i=O.get(l,"data.emailTaken")?"Email is already taken":null)},[t,n,i,r,async a=>{s(1,n=!1),o(a.target.value)},async()=>{n&&M("/signup/password")}]}export default class extends a{constructor(a){super(),e(this,a,R,N,s,{})}}
